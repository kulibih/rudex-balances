(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){e.exports=a(457)},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t){},238:function(e,t){},240:function(e,t){},266:function(e,t){},457:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(7),s=a.n(o),r=(a(219),a(61)),l=a(62),i=a(64),u=a(63),m=a(65),d=a(460),h=a(462),f=(a(220),a(459)),p=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.precision!==e.precision||this.props.replace!==e.replace||this.props.asset!==e.asset||this.props.amount!==e.amount}},{key:"render",value:function(){var e=this.props,t=e.precision,a=e.asset,n=e.amount;return a?(n=void 0!==t?n.toFixed(t):n.toFixed(),c.a.createElement("span",null,n," ",c.a.createElement("small",null,a.replace("RUDEX.","")))):null}}]),t}(n.Component),g=a(36),y=a(38),b=a(14),E=a.n(b),k=a(94),v=a.n(k),w="https://config.blckchnd.com/balances.json?"+Date.now(),j="1.3.0",B="BTS",O=5,A="wss://btsfullnode.bangzi.info/ws",x=[],F=E()(1),S=E()(100),T=E()(50),C=E()(50),I=E()(100),P=E()(100),D=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={data:[],data2:[],prices:{},loading:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.start()}},{key:"start",value:function(){var e=this;v.a.get(w).then(function(t){var a=t.data;A=a.bitshares,a.gateway.warnMinAmount&&(F=E()(a.gateway.warnMinAmount)),a.gateway.okAccumulatedFees&&(S=E()(a.gateway.okAccumulatedFees)),a.gateway.warnAccountBalance&&(T=E()(a.gateway.warnAccountBalance)),a.gateway.warnPoolBalance&&(C=E()(a.gateway.warnPoolBalance)),a.gateway.okAccountBalance&&(I=E()(a.gateway.okAccountBalance)),a.gateway.okPoolBalance&&(P=E()(a.gateway.okPoolBalance)),a.accounts.forEach(function(e){x.push(e)}),g.Apis.instance(A,!0).init_promise.then(function(){y.ChainStore.init(!1).then(function(){e.fetch(),e.fetchData2()})})})}},{key:"fetch",value:function(){var e=this;v.a.get("https://gateway.rudex.org/api/v0_3/coins").then(function(t){var a=[];t.data.forEach(function(e){a.push({name:e.symbol,minAmount:e.minAmount,account:e.issuer})}),e.fetchTokens(a),e.fetchPrices(a)}).catch(function(e){console.log(e)})}},{key:"fetchData2",value:function(){var e=this,t=this.state.data2;x.forEach(function(e){t.push({id:e[0]+e[1],account:e[0],token:e[1],balance:null,min:e[2]})}),this.setState({data2:t}),t.forEach(function(t){Object(y.FetchChain)("getAsset",t.token).then(function(a){Object(y.FetchChain)("getAccount",t.account).then(function(n){Object(y.FetchChain)("getObject",n.getIn(["balances",a.get("id")])).then(function(n){var c=e.state.data2,o=c.find(function(e){return e.id===t.id}),s=E()(n.get("balance")).shiftedBy(-a.get("precision"));o.balance={amount:s,asset:t.token},e.setState({data2:c})})})})})}},{key:"fetchPrices",value:function(e){var t=this;e.forEach(function(e){v.a.get("https://bitsharescan.com/api/asset/".concat(e.name,"/markets?currency=USD&page=1&perPage=10&sort=volume.base&sortDirection=-")).then(function(a){if(a.data.markets){var n=a.data.markets[0].price.USD,c=t.state.prices;c[e.name]=n,t.setState({prices:c})}}).catch(function(e){console.log(e)})})}},{key:"fetchTokens",value:function(e){var t=this,a=this.state.data;e.forEach(function(e){a.push({token:e.name,account:e.account,balance:null,supply:null,feePool:null,accumulatedFees:null,minAmount:null})}),this.setState({data:a}),e.forEach(function(e){Object(y.FetchChain)("getAsset",e.name).then(function(a){Object(y.FetchChain)("getAccount",e.account).then(function(a){Object(y.FetchChain)("getObject",a.getIn(["balances",j])).then(function(n){var c=t.state.data,o=c.find(function(t){return t.token===e.name}),s=E()(n.get("balance")).shiftedBy(-O),r=B;o.account=a.get("name"),o.balance={amount:s,asset:r},t.setState({data:c})})}),Object(y.FetchChain)("getObject",a.get("dynamic_asset_data_id")).then(function(n){var c=t.state.data,o=c.find(function(t){return t.token===e.name});o.supply={amount:E()(n.get("current_supply")).shiftedBy(-a.get("precision")),asset:a.get("symbol")},o.accumulatedFees={amount:E()(n.get("accumulated_fees")).shiftedBy(-a.get("precision")),asset:a.get("symbol")},o.feePool={amount:E()(n.get("fee_pool")).shiftedBy(-O),asset:B},o.minAmount={amount:E()(e.minAmount).shiftedBy(-a.get("precision")),asset:a.get("symbol")},t.setState({data:c})})})})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.prices,n=e.loading,o=e.data2,s=[{title:"Token",dataIndex:"token",key:"token",render:function(e,t,a){if(e)return c.a.createElement("a",{href:"https://market.rudex.org/#/asset/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Account",dataIndex:"account",key:"account",render:function(e,t,a){if(e)return c.a.createElement("a",{href:"https://market.rudex.org/#/account/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Balance (BTS)",dataIndex:"balance",key:"balance",render:function(e,t,a){if(e){var n=null;return e.amount.isLessThan(T)?n="warn":e.amount.isGreaterThan(I)&&(n="success"),c.a.createElement("span",{className:n},c.a.createElement(p,{precision:0,amount:e.amount,asset:e.asset}))}}},{title:"Fee Pool (BTS)",dataIndex:"feePool",key:"feePool",render:function(e,t,a){if(e){var n=null;return e.amount.isLessThan(C)?n="warn":e.amount.isGreaterThan(P)&&(n="success"),c.a.createElement("span",{className:n},c.a.createElement(p,{precision:0,amount:e.amount,asset:e.asset}))}}},{title:"Min Deposit",dataIndex:"minAmount",key:"minAmount",render:function(e,t,n){if(e){var o=a[e.asset],s=null;if(o){var r=null;(o=E()(o).multipliedBy(e.amount)).isLessThan(F)&&(r="warn"),s=c.a.createElement("span",{className:r},c.a.createElement("small",null,"($",o.toFixed(3),")"))}else s=c.a.createElement("span",null,"(?)");return c.a.createElement("span",{className:null},c.a.createElement(p,{amount:e.amount,asset:e.asset})," ",s)}}},{title:"Accumulated Fees",dataIndex:"accumulatedFees",key:"accumulatedFees",render:function(e,t,n){if(e){var o=a[e.asset],s=null;if(o){var r=null;(o=E()(o).multipliedBy(e.amount)).isGreaterThanOrEqualTo(S)&&(r="success"),s=c.a.createElement("span",{className:r},c.a.createElement("small",null,"($",o.toFixed(0),")"))}else s=c.a.createElement("span",null,"(?)");return c.a.createElement("span",null,c.a.createElement(p,{amount:e.amount,asset:e.asset})," ",s)}}},{title:"Supply",dataIndex:"supply",key:"supply",render:function(e,t,n){if(e){var o=a[e.asset],s=null;return o?(o=E()(o).multipliedBy(e.amount).dividedBy(1e3),s=c.a.createElement("span",null,c.a.createElement("small",null,"($",o.toFixed(0),"K)"))):s=c.a.createElement("span",null,"(?)"),c.a.createElement("span",null,c.a.createElement(p,{amount:e.amount,asset:e.asset})," ",s)}}}],r=[{title:"Account",dataIndex:"account",key:"account",render:function(e,t,a){if(e)return c.a.createElement("a",{href:"https://market.rudex.org/#/account/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Balance",dataIndex:"balance",key:"balance",render:function(e,t,a){if(e){var n=null;if(t.min){var o=E()(t.min);e.amount.isLessThan(o)&&(n="warn")}return c.a.createElement("span",{className:n},c.a.createElement(p,{amount:e.amount,asset:e.asset}))}}}];return c.a.createElement("div",null,c.a.createElement("h1",null,"Gateways"),c.a.createElement(f.a,{dataSource:t,columns:s,pagination:!1,loading:n,size:"small"}),c.a.createElement("h1",null,"Monitoring"),c.a.createElement(f.a,{dataSource:o,columns:r,pagination:!1,loading:n,size:"small"}))}}]),t}(n.Component),_=a(461),N=_.a.Content,M=_.a.Header,G=_.a.Footer,L=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,null,c.a.createElement(_.a,{className:"layout"},c.a.createElement(M,null,c.a.createElement("h1",{className:"header"},"RuDEX Balances")),c.a.createElement(N,{style:{padding:"10px"}},c.a.createElement("div",null,c.a.createElement(h.a,{exact:!0,path:"/",component:D}))),c.a.createElement(G,{style:{textAlign:"center",position:"sticky",bottom:"0"}},"RuDEX \xa9 2019")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[214,1,2]]]);
//# sourceMappingURL=main.2449f181.chunk.js.map