(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,n){e.exports=n(457)},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t){},238:function(e,t){},240:function(e,t){},266:function(e,t){},457:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(7),s=n.n(o),r=(n(219),n(60)),i=n(61),u=n(63),l=n(62),m=n(64),p=n(460),f=n(462),h=(n(220),n(459)),d=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.precision!==e.precision||this.props.replace!==e.replace||this.props.asset!==e.asset||this.props.amount!==e.amount}},{key:"render",value:function(){var e=this.props,t=e.precision,n=e.asset,a=e.amount;return n?(a=void 0!==t?a.toFixed(t):a.toFixed(),c.a.createElement("span",null,a," ",c.a.createElement("small",null,n.replace("RUDEX.","")))):null}}]),t}(a.Component),y=n(36),b=n(65),g=n(26),k=n.n(g),E=n(132),v=n.n(E),j="1.3.0",O="BTS",w=5,x=k()(1),F=k()(50),A=k()(50),B=k()(100),S=k()(100),T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={data:[],prices:{},loading:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.get("https://gateway.rudex.org/api/v0_3/coins").then(function(t){var n=[];t.data.forEach(function(e){n.push({name:e.symbol,minAmount:e.minAmount,account:e.issuer})}),e.fetchTokens(n),e.fetchPrices(n)}).catch(function(e){console.log(e)})}},{key:"fetchPrices",value:function(e){var t=this;e.forEach(function(e){v.a.get("https://bitsharescan.com/api/asset/".concat(e.name,"/markets?currency=USD&page=1&perPage=10&sort=volume.base&sortDirection=-")).then(function(n){if(n.data.markets){var a=n.data.markets[0].price.USD,c=t.state.prices;c[e.name]=a,t.setState({prices:c})}}).catch(function(e){console.log(e)})})}},{key:"fetchTokens",value:function(e){var t=this,n=this.state.data;e.forEach(function(e){n.push({token:e.name,account:e.account,balance:null,supply:null,feePool:null,accumulatedFees:null,minAmount:null})}),this.setState({data:n}),y.Apis.instance("wss://france.bitshares.apasia.tech/ws",!0).init_promise.then(function(){b.ChainStore.init(!1).then(function(){e.forEach(function(e){Object(b.FetchChain)("getAsset",e.name).then(function(n){Object(b.FetchChain)("getAccount",e.account).then(function(n){Object(b.FetchChain)("getObject",n.getIn(["balances",j])).then(function(a){var c=t.state.data,o=c.find(function(t){return t.token===e.name}),s=k()(a.get("balance")).shiftedBy(-w),r=O;o.account=n.get("name"),o.balance={amount:s,asset:r},t.setState({data:c})})}),Object(b.FetchChain)("getObject",n.get("dynamic_asset_data_id")).then(function(a){var c=t.state.data,o=c.find(function(t){return t.token===e.name});o.supply={amount:k()(a.get("current_supply")).shiftedBy(-n.get("precision")),asset:n.get("symbol")},o.accumulatedFees={amount:k()(a.get("accumulated_fees")).shiftedBy(-n.get("precision")),asset:n.get("symbol")},o.feePool={amount:k()(a.get("fee_pool")).shiftedBy(-w),asset:O},o.minAmount={amount:k()(e.minAmount).shiftedBy(-n.get("precision")),asset:n.get("symbol")},t.setState({data:c})})})})})})}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.prices,a=e.loading,o=[{title:"Token",dataIndex:"token",key:"token",render:function(e,t,n){if(e)return c.a.createElement("a",{href:"https://market.rudex.org/#/asset/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Account",dataIndex:"account",key:"account",render:function(e,t,n){if(e)return c.a.createElement("a",{href:"https://market.rudex.org/#/account/".concat(e),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Balance (BTS)",dataIndex:"balance",key:"balance",render:function(e,t,n){if(e){var a=null;return e.amount.isLessThan(F)?a="warn":e.amount.isGreaterThan(B)&&(a="success"),c.a.createElement("span",{className:a},c.a.createElement(d,{precision:0,amount:e.amount,asset:e.asset}))}}},{title:"Fee Pool (BTS)",dataIndex:"feePool",key:"feePool",render:function(e,t,n){if(e){var a=null;return e.amount.isLessThan(A)?a="warn":e.amount.isGreaterThan(S)&&(a="success"),c.a.createElement("span",{className:a},c.a.createElement(d,{precision:0,amount:e.amount,asset:e.asset}))}}},{title:"Min Deposit",dataIndex:"minAmount",key:"minAmount",render:function(e,t,a){if(e){var o=n[e.asset],s=null;if(o){var r=null;(o=k()(o).multipliedBy(e.amount)).isLessThan(x)&&(r="warn"),s=c.a.createElement("span",{className:r},"($",o.toFixed(4),")")}else s=c.a.createElement("span",null,"(?)");return c.a.createElement("span",{className:null},c.a.createElement(d,{amount:e.amount,asset:e.asset})," ",s)}}},{title:"Accumulated Fees",dataIndex:"accumulatedFees",key:"accumulatedFees",render:function(e,t,n){if(e)return c.a.createElement("span",null,c.a.createElement(d,{amount:e.amount,asset:e.asset}))}},{title:"Supply",dataIndex:"supply",key:"supply",render:function(e,t,n){if(e)return c.a.createElement("span",null,c.a.createElement(d,{amount:e.amount,asset:e.asset}))}}];return c.a.createElement(h.a,{dataSource:t,columns:o,pagination:!1,loading:a,size:"small"})}}]),t}(a.Component),C=n(461),_=C.a.Content,I=C.a.Header,D=C.a.Footer,P=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,null,c.a.createElement(C.a,{className:"layout"},c.a.createElement(I,null,c.a.createElement("h1",{className:"header"},"RuDEX Balances")),c.a.createElement(_,{style:{padding:"10px"}},c.a.createElement("div",null,c.a.createElement(f.a,{exact:!0,path:"/",component:T}))),c.a.createElement(D,{style:{textAlign:"center",position:"sticky",bottom:"0"}},"RuDEX \xa9 2019")))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[214,1,2]]]);
//# sourceMappingURL=main.88a09452.chunk.js.map